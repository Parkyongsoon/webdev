let db,paging,designerSearch;_5c2‍.x([["index",()=>index],["search",()=>search],["detailProfile",()=>detailProfile]]);_5c2‍.w("../../../models",[["db",["db"],function(v){db=v}]]);_5c2‍.w("../../../utils/pagination",[["paging",["paging"],function(v){paging=v}]]);_5c2‍.w("../../../utils/search",[["designerSearch",["designerSearch"],function(v){designerSearch=v}]]);



       const index = async ctx => {
  try {

    return paging(
      ctx,       
      db.tbl_eluly_users,
      { role: 'designer' },
      'user/designerProfile/index',
      'api/designerProfile?page='
    );

  } catch (e) {
    ctx.throw(500, e);
  };
};

       const search = async ctx => {
  try {
    switch (ctx.query.searchType) {
      case 'name':
        console.log('name')
        return designerSearch(
          ctx,
          'user',
          ['name'],
          ['role'],
          'user/designerProfile/index',
          'api/designerProfile/search?searchType='+ ctx.query.searchType +'&search=' + ctx.query.search + '&page=',
        );

      case 'major':
        console.log('major')
        return designerSearch(
          ctx,
          'user',
          ['major'],
          ['role'],
          'user/designerProfile/index',
          'api/designerProfile/search?searchType='+ ctx.query.searchType +'&search=' + ctx.query.search + '&page=',
        );

      default:
        break;
    };
  } catch (e) {
    _5c2‍.g.console.log(e)
    ctx.throw(500, e);
  };
};

       const detailProfile = async ctx => {
  try {
    const designerProfile = await db.tbl_eluly_users.findOne({where: { id: ctx.params.id, role: 'designer'}});

    ctx.status = 200;

    await ctx.render('user/designerProfile/detailProfile', {
      designerProfile
    });

  } catch (e) {
    ctx.throw(500, e);
  };
};